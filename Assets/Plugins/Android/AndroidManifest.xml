<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.yourcompany.yourapp"
    android:installLocation="auto">

	<!-- RIMUOVI permessi/feature inseriti da librerie (devono stare a livello <manifest>, NON sotto <application>) -->
	<uses-permission android:name="com.oculus.permission.USE_SCENE" tools:node="remove"/>
	<uses-permission android:name="com.oculus.permission.USE_ANCHOR_API" tools:node="remove"/>
	<uses-permission android:name="com.oculus.permission.HAND_TRACKING" tools:node="remove"/>

	<!-- Se non usi passthrough/fotocamera, rimuovi anche CAMERA -->
	<uses-permission android:name="android.permission.CAMERA" tools:node="remove"/>

	<!-- Rimuovi permessi legacy su external storage -->
	<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" tools:node="remove"/>
	<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" tools:node="remove"/>

	<!-- Rimuovi eventuale feature di hand tracking se introdotta da qualche AAR -->
	<uses-feature android:name="oculus.software.handtracking" tools:node="remove"/>

	<!-- Feature VR obbligatoria -->
	<uses-feature
        android:name="android.hardware.vr.headtracking"
        android:version="1"
        android:required="true" />

	<application
        android:label="@string/app_name"
        android:icon="@mipmap/app_icon"
        android:allowBackup="false"
        tools:replace="android:requestLegacyExternalStorage"
        android:requestLegacyExternalStorage="false">

		<activity
            android:name="com.unity3d.player.UnityPlayerGameActivity"
            android:theme="@style/Theme.AppCompat.DayNight.NoActionBar"
            android:launchMode="singleTask"
            android:excludeFromRecents="true"
            android:exported="true"
            android:configChanges="locale|fontScale|keyboard|keyboardHidden|mcc|mnc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|touchscreen|uiMode">

			<intent-filter>
				<action android:name="android.intent.action.MAIN" />
				<category android:name="android.intent.category.LAUNCHER" />
				<category android:name="com.oculus.intent.category.VR" />
			</intent-filter>

			<meta-data android:name="com.oculus.vr.focusaware" android:value="true" />
		</activity>

		<!-- Meta-data vari -->
		<meta-data android:name="unityplayer.SkipPermissionsDialog" android:value="false" />
		<meta-data android:name="com.samsung.android.vr.application.mode" android:value="vr_only" />
		<meta-data android:name="com.oculus.ossplash.background" android:value="black" />
		<meta-data android:name="com.oculus.telemetry.project_guid" android:value="285ce2a2-689e-4b27-b877-015c09033ad1" />

		<!-- Sostieni solo i visori indicati; tools:replace garantisce l’override -->
		<meta-data
            android:name="com.oculus.supportedDevices"
            android:value="quest2|questpro|quest3|quest3s"
            tools:replace="android:value" />
	</application>
</manifest>
